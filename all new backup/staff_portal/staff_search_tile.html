<#attempt>
<#assign
	propsUtil=serviceLocator.findService( "com.liferay.portal.kernel.util.Props" )
	functions=propsUtil.getProperties( "doe.user.profile.function.", true )
/>

<style media="screen">

.accordionTitle, .accordion__Heading {
  display: block;
  text-decoration: none;
}

.accordionTitleActive:before, .accordionTitle.is-expanded:before {
  transform: rotate(-225deg);
}
.accordionItem {
  height: auto;
  overflow: hidden;
	max-height:50em;
  transition: max-height 2s;
}
.accordionItem.is-collapsed {
  max-height: 0;
}
.animateIn {
  animation: accordionIn 0.85s normal ease-in-out both 1;
}
.animateOut {
  animation: accordionOut 0.85s alternate ease-in-out both 1;
}
@keyframes accordionIn {
  0% {
    opacity: 0;
    transform: scale(0.9) rotateX(-60deg);
    transform-origin: 50% 0;
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
}
@keyframes accordionOut {
  0% {
    opacity: 1;
    transform: scale(1);
  }
  100% {
    opacity: 0;
    transform: scale(0.9) rotateX(-60deg);
  }
}





















.tile {
	border-radius: 5px;
	background-color: #fafafa;
	border: solid 1px #ededed;
	position: relative;
}

.tile .tile-title {
  padding-left: 15px;
  border-bottom: solid 1px #ededed;
}
.tile .tile-title h2 {
  margin-top: 15px;
  margin-bottom: 15px;
  font-size: 15px;
	font-weight: 500;
	color: #343441;
}

.tile .tile-title .showHide-button {
  position: absolute;
  top: 0px;
  right: 0px;
  height: 47px;
  width: 60px;
  border-radius: 0 5px 5px 0;
  background-color: transparent;
  border-left: solid 1px #ededed;
  color: #000;
	font-size: 12px;
	font-weight: 600;
}

.search-result {
	margin-left: 15px;
	margin-right: 15px;
	display: initial;
}

.search-result .avatar {
	width: 80px;
	height: 80px;
	border-radius: 50%;
}

.search-result .user-name {
	font-size: 22px;
	font-weight: 500;
	color: #0e3f51;
	padding-left: 15px;
}

.search-result .job-title .sub-title, .search-result .mobile .sub-title {
	font-size: 12px;
	font-weight: 600;
	color: #c2c2c2;
}

.search-result .content-detail {
	font-size: 15px;
	font-weight: 400;
	color: #343441;
	max-height: 24px;
	overflow: hidden;
}

#staff-search .col-xs-12 span, #staff-search .col-sm-4 span {
	font-size: 12px;
	font-weight: 600;
	text-align: left;
	color: #0e3f51;
	margin-top: 17px;
}

#staff-search .col-xs-12 input, #staff-search .col-sm-4 input,
	#staff-search .col-sm-4 select {
	height: 42px;
	border-radius: 4px;
	background-color: #ffffff;
	margin-top: 7px;
	margin-bottom: 17px;
	font-size: 15px;
	font-weight: 400;
	text-align: left;
	color: #343441;
}

#staff-search .col-xs-12 input:focus, #staff-search .col-sm-4 input:focus {
	outline: none;
}

#staff-search .search-inputs {
	margin: 0;
	padding-bottom: 20px;
}

#staff-search .search-inputs .col-sm-4:nth-child(3n-1) {
	padding-right: 0px;
	padding-left: 0px;
}

#staff-search .search-inputs .col-sm-4:nth-child(3n+1) {
	padding-right: 15px;
	padding-left: 0px;
}

#staff-search .search-inputs .col-sm-4:nth-child(3n+3) {
	padding-right: 0px;
	padding-left: 15px;
}

#staff-search .search-inputs .search-button .advSearch {
	width: 100%;
	height: 42px;
	border-radius: 100px;
}

#staff-search .search-inputs .search-button .search {
	width: 100%;
	height: 42px;
	border-radius: 100px;
	background-color: #0e3f51;
}

#staff-search .search-inputs .search-button .search:focus, #staff-search .search-inputs .search-button .advSearch:focus {
	outline: none;
}

#staff-search .search-inputs .search-button .advSearch, #staff-search .search-inputs .search-button .search {
	border-width: 0;
	font-size: 10px;
	font-weight: 600;
	text-align: center;
	color: #ffffff;
}

 #staff-search .search-inputs .search-button .advSearch {
    width: 100%;
    height: 42px;
    border-radius: 100px;
  }
  #staff-search .search-inputs .search-button .search {
    width: 100%;
    height: 42px;
    border-radius: 100px;
    background-color: #0e3f51;
  }
  #staff-search .search-inputs .search-button .search:focus, #staff-search .search-inputs .search-button .advSearch:focus {
    outline: none;
  }
  #staff-search .search-inputs .search-button .advSearch, #staff-search .search-inputs .search-button .search {
    border-width: 0;
    font-size: 10px;
    font-weight: 600;
    text-align: center;
    color: #ffffff;
  }
  #staff-search .search-inputs .search-button .advSearch img {
    padding-right: 10px;
    vertical-align: middle;
    font-size: 16px;
  }

#staff-search .search-inputs .search-button .search:before {
	content: "\F002";
	font-family: FontAwesome;
	position: absolute;
	left: 15px;
	top: 37px;
	font-size: 18px;
	-webkit-text-stroke: 1px #0e3f51;
}

#staff-search .search-inputs .search-button .advSearch img {
	padding-right: 10px;
	vertical-align: middle;
	font-size: 16px;
}

.search-inputs .search-button {
	margin-top: 7px;
}

.search-button .col-sm-12, .search-button .col-md-11, .search-button .col-sm-6,
	.search-button .col-md-8, .search-button .col-md-4 {
	padding-left: 0;
	padding-right: 0;
}

.search-button .col-md-8 {
	padding-right: 5px;
}

.search-button .col-md-4 {
	padding-left: 5px;
}

#staff-search .search-result ul {
	-webkit-padding-start: 0;
}

#staff-search .search-result ul li {
	list-style: none;
	display: inline-block;
	width: 50%;
}

#staff-search .search-result ul li>.col-xs-12 {
	margin-top: 15px;
	border-radius: 4px;
	background-color: #fafafa;
	border: solid 1px #ededed;
	padding: 15px 0 0 0;
}

.search-result ul li:nth-child(even) {
	padding-left: 7px;
	padding-right: 0px;
}

.search-result ul li:nth-child(odd) {
	padding-right: 8px;
	padding-left: 0px;
}

#search-result .row {
	margin-left: 0;
	margin-right: 0;
}

#search-result .no-result {
	display: inline-block;
}

#search-result .showmore {
	text-align: center;
	text-decoration: none;
}

#search-result .showmore div {
	width: 100%;
	cursor: pointer;
}

#search-result .showmore div:hover {
	background-color: #f5f5f5;
}

#search-result .showmore i {
	font-size: 24px;
}

#search-result .showmore p {
	font-size: 14px;
}

#advanced-search-link {
	background: #9b9b9b url(/o/doe-staff-theme/images/advanced.svg) no-repeat;
	background-position: left;
	background-position-x: 15px;
}

#show-simple {
	background: #9b9b9b url(/o/doe-staff-theme/images/close.svg) no-repeat;
	background-position: left;
	background-position-x: 15px;
}

@media only screen and (max-width: 992px) and (min-width: 768px) {
	.search-result .avatar {
		width: 60px;
		height: 60px;
	}
}

@media ( max-width : 768px) {
	#staff-search .search-inputs .col-sm-4:nth-child(3n-1), #staff-search .search-inputs .col-sm-4:nth-child(3n+1),
		#staff-search .search-inputs .col-sm-4:nth-child(3n+3) {
		padding-right: 15px;
		padding-left: 15px;
	}
	.search-result ul li:nth-child(even) {
		padding-left: 0px;
		padding-right: 0px;
	}
	.search-result ul li:nth-child(odd) {
		padding-right: 0px;
		padding-left: 0px;
	}
	#staff-search .col-xs-12 .col-xs-12 .col-xs-9 .col-xs-6 {
		padding-left: 0;
		padding-right: 0;
	}
	#staff-search .search-result ul li {
		width: 100%;
	}
}
</style>


  <section id="staff-search" class="tile">
		<header class="tile-title">
        <h2 class="tile-heading">Staff Search</h2>
        <button aria-expanded="false" aria-controls="tileContent" class="accordion-title accordionTitle js-accordionTrigger showHide-button">HIDE</button>
    </header>
		<div class="accordion-content accordionItem tile-content is-expanded animateIn" id="tileContent" aria-expanded="true">
      <form class="search-inputs row" action="#" id="simple-search" onsubmit="simpleSearch();return false;">
        <div class="col-xs-12 ">
          <span>FIRST NAME</span> <input type="text" class="col-xs-12" name="sFirstName" placeholder="Enter first name here... " onfocus="this.placeholder = ''"
            onblur="this.placeholder = 'Enter first name here... '">
        </div>
        <div class="col-xs-12 ">
          <span>SURNAME</span> <input type="text" class="col-xs-12" name="sSurname" placeholder="Enter surname here... " onfocus="this.placeholder = ''" onblur="this.placeholder = 'Enter surname here... '">
        </div>
        <div class="col-xs-12  search-button">
          <div class="col-sm-12">
            <div class="col-xs-6 col-sm-6 col-md-8">
              <button id="advanced-search-link" class="advSearch" type="button" onclick="location.href='/group/staff-portal/staff-search';" >ADVANCED SEARCH</button>
            </div>
            <div class="col-xs-6 col-sm-6 col-md-4">
              <button class="search" type="submit" name="SEARCH" onclick="simpleSearch();">SEARCH</button>
            </div>
          </div>
        </div>
      </form>
    </div>
  </section>



<script type="text/javascript">
$(document).ready(function() {
	(function(){

		current_width = $(window).width();
		if(current_width < 480){
			$('.accordion-content').removeClass('is-expanded').addClass('is-collapsed');
			$('.accordion-content').removeClass('animateIn');
			$('.accordion-content').attr('aria-hidden','false');
			$('.showHide-button').text("SHOW");
		}

		$(window).resize(function(){
      current_width = $(window).width();
      if(current_width < 480){
				$('.accordion-content').removeClass('is-expanded').addClass('is-collapsed');
				$('.accordion-content').removeClass('animateIn');
				$('.accordion-content').attr('aria-hidden','false');
				$('.showHide-button').text("SHOW");
      } else {
				$('.accordion-content').removeClass('is-collapsed').addClass('is-expanded');
				$('.accordion-content').addClass('animateIn');
				$('.accordion-content').attr('aria-hidden','true');
				$('.showHide-button').text("HIDE");
      }
    });



		var d = document,
		accordionToggles = d.querySelectorAll('.js-accordionTrigger'),
		setAria,
		setAccordionAria,
		switchAccordion,
		touchSupported = ('ontouchstart' in window),
		pointerSupported = ('pointerdown' in window);

		skipClickDelay = function(e){
			e.preventDefault();
			e.target.click();
		}

			setAriaAttr = function(el, ariaType, newProperty){
			el.setAttribute(ariaType, newProperty);
		};
		setAccordionAria = function(el1, el2, expanded){
			switch(expanded) {
				case "true":
					setAriaAttr(el1, 'aria-expanded', 'true');
					setAriaAttr(el2, 'aria-hidden', 'false');
					break;
				case "false":
					setAriaAttr(el1, 'aria-expanded', 'false');
					setAriaAttr(el2, 'aria-hidden', 'true');
					break;
				default:
					break;
			}
		};

	switchAccordion = function(e) {
		e.preventDefault();
		var thisAnswer = e.target.parentNode.nextElementSibling;
		var thisQuestion = e.target;
		if(thisAnswer.classList.contains('is-collapsed')) {
			setAccordionAria(thisQuestion, thisAnswer, 'true');
			$(this).text("HIDE");
		} else {
			setAccordionAria(thisQuestion, thisAnswer, 'false');
			$(this).text("SHOW");
		}
			thisQuestion.classList.toggle('is-collapsed');
			thisQuestion.classList.toggle('is-expanded');
			thisAnswer.classList.toggle('is-collapsed');
			thisAnswer.classList.toggle('is-expanded');

			thisAnswer.classList.toggle('animateIn');
		};
		for (var i=0,len=accordionToggles.length; i<len; i++) {
			if(touchSupported) {
				accordionToggles[i].addEventListener('touchstart', skipClickDelay, false);
			}
			if(pointerSupported){
				accordionToggles[i].addEventListener('pointerdown', skipClickDelay, false);
			}
			accordionToggles[i].addEventListener('click', switchAccordion, false);
		}
	})();

});










      function doSearch(data) {
    	var param = JSON.stringify( data );
    	location.href = '/group/staff-portal/staff-search?q=' + encodeURIComponent( param );
      }

      function simpleSearch() {
        var data=[];
        var fields = ['displayName', 'sn']
        $("#simple-search input").each(function(key){
         if ($(this).val()) {
           data.push({"name":fields[key], "value":"*"+$(this).val()+"*"});
         }
        });
        var simpleSearchKeywords = {
          "isAndSearch" : "true",
          "clauses" : data
        };
        doSearch(simpleSearchKeywords);
      }

</script>
<#recover>
  <div>Sorry, we were unable to process this request.</div>
  <div class="hidden-error">${.error}</div>
</#attempt>
